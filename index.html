<!DOCTYPE html>
<html>

<head>
        <title>Patterns</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="aef_style.css">
		
</head>

<body><div class="contentBox" id="contentBox">
        <h1>JKU Linz School of Education</h1>
        <br>
		
		<div id="menu"><object data="menu_patterns.svg" type="image/svg+xml" width="890" height="350"></object></div>
		
		<ul id="cardList"></ul>
</div>


<script>

var idList = ['RHYH3UQ8','tvvekv46','chs4jfvs', 'ts2adk9c', 'XUv5mXTm'];

 if (window.addEventListener){
        window.addEventListener('load', createAllCards);
	}
    else if (window.attachEvent){
        window.attachEvent('onload', createAllCards);
	}

function createAllCards(){
	for(var i=0; i<idList.length; i++){
		createCard(idList[i]);
	}
}

function createCard(id) {
  var xhttp = new XMLHttpRequest();
  
  xhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
   var response = xhttp.responseText;
  
  if (response) {
	response = JSON.parse(response);
	var filename = response.title;
	var previewUrl = response.thumbUrl;
	// seems to be a bug in api -> returns "...$1.png" instead of "...@1.png"
	var previewImg = previewUrl.substr(0,previewUrl.length-6) + '@l.png';
	var type = response.type;
	var author = response.creator.displayname;
	
  }
  
  var typeText = type=='ws'? "Activity" : "Book";
  
  var card = 
		'<div class="card"><a class="card-link" title="'+ filename +'" href="https://www.geogebra.org/m/'+ id +'" target="_blank">'+
			'<div class="card-image" id="card-image"><img alt="" src="' + previewImg +'" ></div>'+
			'<div class="card-content">'+
				'<h3 class="card-title" id="card-title">'+ filename +'</h3>'+
				'<div class="card-type" id="card-type">'+ typeText +'</div>'+
				'<p class="card-author" id=="card-author">'+ author +'</p>'+
			'</div></a></div>';
  var cardNode = document.createElement("LI");
  cardNode.innerHTML = card;
  document.getElementById("cardList").appendChild(cardNode);
  }
};
  
  xhttp.open("GET", "https://api.geogebra.org/v1.0/materials/" + id + "?scope=basic&embed=creator", true);
  xhttp.send();
 
}




</script>

</body>

</html>
